<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>American Flag – SOS Sandbox</title>
  <style>
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #001322;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: #fff;
    }

    .flag-wrapper {
      display: inline-block;
      padding: 16px 20px;
      border-radius: 12px;
      background: rgba(0, 0, 0, 0.35);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.6);
      text-align: center;
    }

    .flag-title {
      font-size: 1rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      margin-bottom: 10px;
      opacity: 0.9;
    }

    .flag {
      position: relative;
      width: 360px;
      height: 190px;
      overflow: hidden;
      border-radius: 6px;
      box-shadow: 0 0 0 2px #111;
      transform-origin: left center;
      animation: flag-sway 3.5s ease-in-out infinite;
    }

    /* Red & white stripes */
    .stripe {
      position: absolute;
      left: 0;
      width: 100%;
      height: calc(100% / 13);
      background: #b22234;
    }

    .stripe:nth-child(even) {
      background: #ffffff;
    }

    .stripe:nth-child(1) { top: calc(0 * 100% / 13); }
    .stripe:nth-child(2) { top: calc(1 * 100% / 13); }
    .stripe:nth-child(3) { top: calc(2 * 100% / 13); }
    .stripe:nth-child(4) { top: calc(3 * 100% / 13); }
    .stripe:nth-child(5) { top: calc(4 * 100% / 13); }
    .stripe:nth-child(6) { top: calc(5 * 100% / 13); }
    .stripe:nth-child(7) { top: calc(6 * 100% / 13); }
    .stripe:nth-child(8) { top: calc(7 * 100% / 13); }
    .stripe:nth-child(9) { top: calc(8 * 100% / 13); }
    .stripe:nth-child(10) { top: calc(9 * 100% / 13); }
    .stripe:nth-child(11) { top: calc(10 * 100% / 13); }
    .stripe:nth-child(12) { top: calc(11 * 100% / 13); }
    .stripe:nth-child(13) { top: calc(12 * 100% / 13); }

    /* Blue canton */
    .canton {
      position: absolute;
      top: 0;
      left: 0;
      width: 40%;
      height: calc(7 * 100% / 13);
      background: #3c3b6e;
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      grid-template-rows: repeat(5, 1fr);
      padding: 6px 8px;
      box-sizing: border-box;
    }

    .star {
      font-size: 10px;
      color: #ffffff;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0.9;
    }

    /* Simple waving illusion using a gradient mask + transform */
    .flag::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 0% 50%, rgba(255,255,255,0.18), transparent 55%);
      mix-blend-mode: soft-light;
      opacity: 0.9;
      pointer-events: none;
      animation: highlight-wave 2.8s ease-in-out infinite;
    }

    @keyframes flag-sway {
      0%   { transform: perspective(700px) rotateY(-8deg); }
      50%  { transform: perspective(700px) rotateY(-2deg); }
      100% { transform: perspective(700px) rotateY(-8deg); }
    }

    @keyframes highlight-wave {
      0%   { transform: translateX(-15%); }
      50%  { transform: translateX(10%); }
      100% { transform: translateX(-15%); }
    }

    .footer-note {
      margin-top: 10px;
      font-size: 0.8rem;
      opacity: 0.8;
    }

    .pulse {
      animation: pulse 1.8s ease-in-out infinite;
    }

    @keyframes pulse {
      0%   { opacity: 0.4; }
      50%  { opacity: 1; }
      100% { opacity: 0.4; }
    }
  </style>
</head>
<body>
  <div class="flag-wrapper">
    <div class="flag-title pulse">SOS • HTML • CSS • JS</div>

    <div class="flag" id="flag">
      <!-- 13 stripes -->
      <div class="stripe"></div>
      <div class="stripe"></div>
      <div class="stripe"></div>
      <div class="stripe"></div>
      <div class="stripe"></div>
      <div class="stripe"></div>
      <div class="stripe"></div>
      <div class="stripe"></div>
      <div class="stripe"></div>
      <div class="stripe"></div>
      <div class="stripe"></div>
      <div class="stripe"></div>
      <div class="stripe"></div>

      <!-- Canton with stars (symbolic grid, not exact layout) -->
      <div class="canton" id="canton"></div>
    </div>

    <div class="footer-note" id="footerNote">
      Press spacebar to toggle “calm mode”.
    </div>
  </div>

  <script>
    // Fill canton with 50 stars (symbolic)
    const canton = document.getElementById("canton");
    const totalStars = 50;
    for (let i = 0; i < totalStars; i++) {
      const star = document.createElement("div");
      star.className = "star";
      star.textContent = "★";
      canton.appendChild(star);
    }

    // Simple JS: toggle animation on/off with spacebar
    const flag = document.getElementById("flag");
    const footerNote = document.getElementById("footerNote");
    let calm = false;

    window.addEventListener("keydown", (e) => {
      if (e.code === "Space") {
        calm = !calm;
        if (calm) {
          flag.style.animationPlayState = "paused";
          flag.style.setProperty("--paused", 1);
          footerNote.textContent = "Calm mode on. Press spacebar to bring the wave back.";
        } else {
          flag.style.animationPlayState = "running";
          footerNote.textContent = "Press spacebar to toggle “calm mode”.";
        }
      }
    });
  </script>
</body>
</html>

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Model Cars & Trucks Showroom</title>
<style>
  :root{
    --bg:#0f172a; --panel:#111827; --text:#e6edf7; --muted:#a7b3c1;
    --accent:#06d6a0; --accent2:#4cc9f0; --warn:#ef476f;
    --card:#162137; --chip:#22314d; --chipText:#dbe7ff;
  }
  body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,sans-serif;}
  .wrap{display:grid;grid-template-columns:320px 1fr;gap:14px;min-height:100vh;}
  @media (max-width:960px){.wrap{grid-template-columns:1fr} .grid{grid-template-columns:repeat(2,1fr)}}
  @media (max-width:640px){.grid{grid-template-columns:1fr}}
  .panel{background:var(--panel);padding:12px;display:flex;flex-direction:column;gap:10px}
  h1{margin:0 0 8px;font-size:20px;font-weight:800}
  .status{font-weight:700;background:#0b1220;border-radius:12px;padding:8px}
  .group{border:1px solid #243145;border-radius:12px;padding:10px}
  label{display:flex;align-items:center;gap:8px}
  select,input[type="text"]{width:100%;padding:0.6rem;border-radius:10px;border:1px solid #23324f;background:#0b1220;color:var(--text)}
  .row{display:flex;gap:8px;flex-wrap:wrap}
  .btn{flex:1;min-width:120px;padding:0.7rem 1rem;border:none;border-radius:12px;font-weight:800;cursor:pointer}
  .primary{background:var(--accent);color:#062b23}
  .secondary{background:var(--accent2);color:#07121f}
  .warn{background:var(--warn);color:#1a0b0b}
  .grid{padding:12px;display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
  .card{background:var(--card);border:1px solid #26324e;border-radius:14px;overflow:hidden;display:flex;flex-direction:column}
  .thumb{height:140px;background:linear-gradient(135deg,#203354,#0e1b2e)}
  .thumb canvas{width:100%;height:100%}
  .body{padding:10px;display:grid;gap:6px}
  .title{font-weight:800}
  .meta{color:var(--muted);font-size:13px}
  .chips{display:flex;gap:6px;flex-wrap:wrap}
  .chip{background:var(--chip);color:var(--chipText);border-radius:16px;padding:4px 8px;font-size:12px}
  .actions{display:flex;gap:8px;margin-top:8px}
  .iconbtn{flex:0 0 auto;padding:0.5rem 0.7rem;border:none;border-radius:10px;background:#23324f;color:var(--text);cursor:pointer}
  .iconbtn.heart.active{background:#2b1b24;color:#ff6b97}
  .drawer{position:sticky;bottom:0;background:#0b1220;padding:10px;border-top:1px solid #243145}
  .drawer h3{margin:0 0 8px;font-size:16px}
  .compare{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
  .slot{background:#111a2a;border:1px dashed #243145;border-radius:10px;padding:8px;min-height:82px}
  .slot .name{font-weight:700}
  .slot .small{font-size:13px;color:var(--muted)}
  .kbd{display:inline-block;padding:2px 6px;border-radius:6px;background:#1f2937}
</style>
</head>
<body>
<div class="wrap">
  <aside class="panel" aria-label="Filters and controls">
    <h1>Model Cars & Trucks Showroom</h1>
    <div class="status" id="status" aria-live="polite">Showing all models</div>

    <div class="group">
      <label>Search
        <input type="text" id="q" placeholder="Search by name or brand..." />
      </label>
      <label>Type
        <select id="type">
          <option value="">All</option>
          <option value="car">Cars</option>
          <option value="truck">Trucks</option>
        </select>
      </label>
      <label>Brand
        <select id="brand">
          <option value="">All</option>
          <option value="Ford">Ford</option>
          <option value="Chevrolet">Chevrolet</option>
          <option value="Toyota">Toyota</option>
          <option value="Ram">Ram</option>
        </select>
      </label>
      <label><input type="checkbox" id="fordOnly"> Ford only</label>
      <label>Sort
        <select id="sort">
          <option value="name">Name (A–Z)</option>
          <option value="priceAsc">Price (low to high)</option>
          <option value="priceDesc">Price (high to low)</option>
          <option value="yearDesc">Year (newest)</option>
          <option value="yearAsc">Year (oldest)</option>
        </select>
      </label>
      <div class="row">
        <button class="btn primary" id="apply">Apply</button>
        <button class="btn secondary" id="reset">Reset</button>
      </div>
    </div>

    <div class="group">
      <p>Keyboard: <span class="kbd">Tab</span> to navigate cards, <span class="kbd">Enter</span> to add to compare, <span class="kbd">F</span> to favorite.</p>
    </div>

    <div class="group drawer" aria-label="Compare drawer">
      <h3>Compare</h3>
      <div class="compare">
        <div class="slot" id="cmp1"><div class="name">Empty</div><div class="small">Add a model</div></div>
        <div class="slot" id="cmp2"><div class="name">Empty</div><div class="small">Add a model</div></div>
        <div class="slot" id="cmp3"><div class="name">Empty</div><div class="small">Add a model</div></div>
      </div>
      <div class="row" style="margin-top:8px">
        <button class="btn warn" id="clearCompare">Clear compare</button>
      </div>
    </div>
  </aside>

  <main class="grid" id="grid" aria-label="Model grid"></main>
</div>

<script>
  // Demo inventory (replace/extend with your data)
  const inventory = [
    { id:'f150', name:'F‑150', brand:'Ford', type:'truck', year:2024, price:39999, color:'#3a86ff' },
    { id:'mustang', name:'Mustang', brand:'Ford', type:'car', year:2025, price:45999, color:'#ff006e' },
    { id:'bronco', name:'Bronco', brand:'Ford', type:'truck', year:2023, price:41999, color:'#00bbf9' },
    { id:'maverick', name:'Maverick', brand:'Ford', type:'truck', year:2024, price:26999, color:'#72efdd' },
    { id:'camaro', name:'Camaro', brand:'Chevrolet', type:'car', year:2022, price:35999, color:'#ef476f' },
    { id:'silverado', name:'Silverado', brand:'Chevrolet', type:'truck', year:2024, price:42999, color:'#ffd166' },
    { id:'supra', name:'Supra', brand:'Toyota', type:'car', year:2023, price:51999, color:'#06d6a0' },
    { id:'ram1500', name:'1500', brand:'Ram', type:'truck', year:2024, price:44999, color:'#4cc9f0' },
  ];

  // State
  const state = {
    q:'', type:'', brand:'', fordOnly:false, sort:'name',
    favorites: JSON.parse(localStorage.getItem('favorites')||'[]'),
    compare: []
  };

  // Elements
  const grid = document.getElementById('grid');
  const statusEl = document.getElementById('status');
  const q = document.getElementById('q');
  const typeSel = document.getElementById('type');
  const brandSel = document.getElementById('brand');
  const fordOnly = document.getElementById('fordOnly');
  const sortSel = document.getElementById('sort');
  const applyBtn = document.getElementById('apply');
  const resetBtn = document.getElementById('reset');
  const clearCompareBtn = document.getElementById('clearCompare');

  // Render thumbnail on canvas (abstract silhouette)
  function drawThumb(canvas, color){
    const ctx = canvas.getContext('2d');
    const w = canvas.width = canvas.clientWidth;
    const h = canvas.height = canvas.clientHeight;
    ctx.clearRect(0,0,w,h);
    ctx.fillStyle = color;
    // Body
    ctx.beginPath();
    ctx.roundRect(w*0.1,h*0.45,w*0.8,h*0.25,12);
    ctx.fill();
    // Cabin
    ctx.beginPath();
    ctx.roundRect(w*0.55,h*0.3,w*0.25,h*0.18,10);
    ctx.fill();
    // Hood
    ctx.beginPath();
    ctx.roundRect(w*0.22,h*0.38,w*0.26,h*0.10,8);
    ctx.fill();
    // Wheels
    ctx.fillStyle = '#0b0f1a';
    ctx.beginPath(); ctx.arc(w*0.26,h*0.73,h*0.07,0,Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.arc(w*0.74,h*0.73,h*0.07,0,Math.PI*2); ctx.fill();
    // Highlights
    ctx.fillStyle = '#ffffff22';
    ctx.fillRect(w*0.58,h*0.32,w*0.2,h*0.06);
  }

  function formatPrice(n){ return '$' + n.toLocaleString(); }

  function filtered(){
    let list = inventory.slice();
    if (state.q){
      const qq = state.q.toLowerCase();
      list = list.filter(i => i.name.toLowerCase().includes(qq) || i.brand.toLowerCase().includes(qq));
    }
    if (state.type) list = list.filter(i => i.type === state.type);
    if (state.brand) list = list.filter(i => i.brand === state.brand);
    if (state.fordOnly) list = list.filter(i => i.brand === 'Ford');

    switch (state.sort){
      case 'name': list.sort((a,b)=> a.name.localeCompare(b.name)); break;
      case 'priceAsc': list.sort((a,b)=> a.price - b.price); break;
      case 'priceDesc': list.sort((a,b)=> b.price - a.price); break;
      case 'yearDesc': list.sort((a,b)=> b.year - a.year); break;
      case 'yearAsc': list.sort((a,b)=> a.year - b.year); break;
    }
    return list;
  }

  function render(){
    const list = filtered();
    grid.innerHTML = '';
    statusEl.textContent = `Showing ${list.length} model${list.length!==1?'s':''}${state.fordOnly?' • Ford only':''}`;
    list.forEach(item => {
      const card = document.createElement('article');
      card.className = 'card';
      card.tabIndex = 0;
      card.setAttribute('aria-label', `${item.brand} ${item.name}, ${item.year}, ${formatPrice(item.price)}`);

      const thumb = document.createElement('div');
      thumb.className = 'thumb';
      const canvas = document.createElement('canvas');
      thumb.appendChild(canvas);

      const body = document.createElement('div'); body.className = 'body';
      const title = document.createElement('div'); title.className = 'title'; title.textContent = `${item.brand} ${item.name}`;
      const meta = document.createElement('div'); meta.className = 'meta'; meta.textContent = `${item.type.toUpperCase()} • ${item.year} • ${formatPrice(item.price)}`;

      const chips = document.createElement('div'); chips.className = 'chips';
      const chip1 = document.createElement('span'); chip1.className = 'chip'; chip1.textContent = item.type === 'truck' ? '4×4' : 'Sport';
      const chip2 = document.createElement('span'); chip2.className = 'chip'; chip2.textContent = item.brand;
      chips.append(chip1, chip2);

      const actions = document.createElement('div'); actions.className = 'actions';
      const addBtn = document.createElement('button'); addBtn.className = 'iconbtn'; addBtn.textContent = 'Add to compare';
      const favBtn = document.createElement('button'); favBtn.className = 'iconbtn heart'; favBtn.textContent = '♥';

      if (state.favorites.includes(item.id)) favBtn.classList.add('active');

      addBtn.onclick = () => addToCompare(item);
      favBtn.onclick = () => toggleFavorite(item);

      card.addEventListener('keydown', (e) => {
        if (e.code === 'Enter') addToCompare(item);
        if (e.code === 'KeyF') toggleFavorite(item);
      });

      actions.append(addBtn, favBtn);
      body.append(title, meta, chips, actions);
      card.append(thumb, body);
      grid.appendChild(card);

      // After in DOM, draw canvas
      requestAnimationFrame(()=> drawThumb(canvas, item.color));
    });
    renderCompare();
  }

  function toggleFavorite(item){
    const idx = state.favorites.indexOf(item.id);
    if (idx >= 0) state.favorites.splice(idx,1);
    else state.favorites.push(item.id);
    localStorage.setItem('favorites', JSON.stringify(state.favorites));
    render();
  }

  function addToCompare(item){
    if (state.compare.find(c => c.id === item.id)) return;
    if (state.compare.length >= 3) { statusEl.textContent = 'Compare is full (max 3)'; return; }
    state.compare.push(item);
    renderCompare();
    statusEl.textContent = `Added ${item.brand} ${item.name} to compare`;
  }

  function renderCompare(){
    const slots = [document.getElementById('cmp1'), document.getElementById('cmp2'), document.getElementById('cmp3')];
    for (let i=0;i<3;i++){
      const s = slots[i];
      s.innerHTML = '';
      if (state.compare[i]){
        const m = state.compare[i];
        const name = document.createElement('div'); name.className='name'; name.textContent = `${m.brand} ${m.name}`;
        const small = document.createElement('div'); small.className='small'; small.textContent = `${m.type.toUpperCase()} • ${m.year} • ${formatPrice(m.price)}`;
        const rm = document.createElement('button'); rm.className='iconbtn'; rm.textContent='Remove'; rm.onclick = () => { state.compare.splice(i,1); renderCompare(); };
        s.append(name, small, rm);
      } else {
        const name = document.createElement('div'); name.className='name'; name.textContent='Empty';
        const small = document.createElement('div'); small.className='small'; small.textContent='Add a model';
        s.append(name, small);
      }
    }
  }

  // Bind UI
  q.oninput = () => { state.q = q.value.trim(); render(); };
  typeSel.onchange = () => { state.type = typeSel.value; render(); };
  brandSel.onchange = () => { state.brand = brandSel.value; render(); };
  fordOnly.onchange = () => { state.fordOnly = fordOnly.checked; render(); };
  sortSel.onchange = () => { state.sort = sortSel.value; render(); };
  applyBtn.onclick = () => render();
  resetBtn.onclick = () => {
    q.value = ''; typeSel.value=''; brandSel.value=''; fordOnly.checked=false; sortSel.value='name';
    state.q=''; state.type=''; state.brand=''; state.fordOnly=false; state.sort='name'; state.compare=[];
    render();
    statusEl.textContent = 'Filters reset';
  };
  clearCompareBtn.onclick = () => { state.compare = []; renderCompare(); statusEl.textContent='Compare cleared'; };

  // Init
  render();
</script>
</body>
</html>
